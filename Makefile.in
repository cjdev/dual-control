MODULEFLAGS = -fPIC -fno-stack-protector
MODULEOBJS = dual_control.o

.PHONY: all
all: dual_control.a

dual_control.a: $(MODULEOBJS)
	ar rvs $@ $^
	ranlib $@

$(MODULEOBJS): %.o: %.c
	$(CC) -c $(CFLAGS) $(CPPFLAGS) $(MODULEFLAGS) $< -o $@

.PHONY: clean
clean:
	rm -f *.o *.a

.PHONY: distclean
distclean: clean
	rm -f Makefile config.h

